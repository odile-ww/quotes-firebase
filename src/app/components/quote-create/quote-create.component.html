<h1 *ngIf="mode === 'create'" class="text-muted">Add New Quote</h1>
<h1 *ngIf="mode === 'edit'">Edit Quote</h1>
<div
  *ngIf="mode === 'edit'"
  class="custom-button-wrapper row mb-2 flex-row-reverse"
>
  <button class="custom-float-button" (click)="deleteQuote($event)">
    <i class="fas fa-trash-alt"></i>
  </button>
</div>
<form [formGroup]="quoteForm" (ngSubmit)="saveQuote(quoteForm.value)">
  <div class="form-group">
    <div class="row">
      <label for="content" class="col-sm-2 col-form-label">Content:</label>
      <textarea
        formControlName="content"
        rows="5"
        id="content"
        name="content"
        class="col-sm-8 form-control"
        required
      ></textarea>
    </div>
    <div
      *ngIf="content.errors?.required && content.touched"
      class="row invalid-feedback"
    >
      This field is required.
    </div>
    <div
      *ngIf="content.errors?.minlength && content.touched"
      class="row invalid-feedback"
    >
      Must have at least 5 characters.
    </div>
  </div>
  <div class="form-group">
    <div class="row">
      <label for="isFeatured" class="col-sm-2 col-form-label "
        >Featured Quote:</label
      >
      <input type="checkbox" formControlName="isFeatured" id="isFeatured" />
    </div>
  </div>
  <div class="form-group">
    <div class="row">
      <label for="author" class="col-sm-2 col-form-label ">Author:</label>
      <input
        type="text"
        formControlName="author"
        id="author"
        name="author"
        class="col-sm-8 form-control"
      />
    </div>
  </div>

  <div class="form-group">
    <div class="row mt-4">
      <label for="title" class="col-sm-2 col-form-label ">Title:</label>
      <input
        type="text"
        formControlName="title"
        id="title"
        name="title"
        class="col-sm-8 form-control"
      />
    </div>
  </div>

  <div formArrayName="tags" class="form-group">
    <div *ngFor="let tag of tags.controls; let i = index" class="row mt-4">
      <label for="tag-{{ i }}" class="col-sm-2 col-form-label "
        >Tag {{ i + 1 }}:</label
      >
      <div class="input-group col-sm-8">
        <input
          type="text"
          [formControlName]="i"
          id="tag-{{ i }}"
          class="form-control"
        />
        <div class="input-group-append">
          <button class="btn btn-info" (click)="deleteTag(i)">
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>
    </div>
    <div class="row invalid-feedback mt-2" *ngIf="tags.length >= 5">
      You've reached the maximum number of tags allowed for a quote.
    </div>
    <div class="row mt-4">
      <button
        (click)="addTag($event)"
        [disabled]="tags.length >= 5"
        class="btn btn-outline-info offset-md-9"
      >
        Add Tag
      </button>
    </div>
  </div>
  <div class="form-group mt-4">
    <input
      type="submit"
      name="Submit"
      class="col-sm-10 btn btn-primary btn-lg btn-block"
      [disabled]="quoteForm.invalid"
    />
  </div>
</form>
